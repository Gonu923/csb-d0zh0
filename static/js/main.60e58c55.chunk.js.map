{"version":3,"sources":["Context.js","withContext.js","components/AddProducts.js","components/CartItem.js","components/Cart.js","components/Login.js","components/ProductList.js","App.js","index.js"],"names":["Context","React","createContext","withContext","WrappedComponent","initState","name","price","stock","shortDesc","description","props","save","e","a","preventDefault","state","id","Math","random","toString","substring","Date","now","axios","post","context","addProduct","setState","flash","status","msg","handleChange","target","value","this","user","accessLevel","className","onSubmit","type","onChange","required","rows","style","resize","onClick","to","Component","CartItem","cartItem","cartKey","product","amount","src","alt","textTransform","removeFromCart","cart","cartKeys","Object","keys","length","map","key","clearCart","checkout","login","username","password","error","then","loggedIn","products","index","addToCart","App","callback","slice","push","localStorage","setItem","JSON","stringify","cartItemId","removeItem","p","put","routerRef","current","history","email","catch","res","message","jwt_decode","data","accessToken","token","logout","createRef","getItem","get","parse","Provider","ref","role","aria-label","class","aria-expanded","data-target","showMenu","aria-hidden","marginLeft","exact","path","component","ProductList","Login","Cart","AddProducts","rootElement","document","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.60e58c55.chunk.js","sourcesContent":["import React from \"react\";\r\nconst Context = React.createContext({});\r\n\r\nexport default Context;\r\n","import React from \"react\";\r\nimport Context from \"./Context\";\r\nconst withContext = (WrappedComponent) => {\r\n  const withHOC = (props) => {\r\n    return (\r\n      <Context.Consumer>\r\n        {(context) => <WrappedComponent {...props} context={context} />}\r\n      </Context.Consumer>\r\n    );\r\n  };\r\n};\r\n\r\nexport default withContext;\r\n","import React, { Component } from \"react\";\r\nimport withContext from \"../withContext\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst initState = {\r\n  name: \"\",\r\n  price: \"\",\r\n  stock: \"\",\r\n  shortDesc: \"\",\r\n  description: \"\"\r\n};\r\n\r\nclass AddProduct extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = initState;\r\n  }\r\n\r\n  save = async (e) => {\r\n    e.preventDefault();\r\n    const { name, price, stock, shortDesc, description } = this.state;\r\n\r\n    if (name && price) {\r\n      const id =\r\n        Math.random().toString(36).substring(2) + Date.now().toString(36);\r\n\r\n      await axios.post(\"http://localhost:3001/products\", {\r\n        id,\r\n        name,\r\n        price,\r\n        stock,\r\n        shortDesc,\r\n        description\r\n      });\r\n\r\n      this.props.context.addProduct(\r\n        {\r\n          name,\r\n          price,\r\n          shortDesc,\r\n          description,\r\n          stock: stock || 0\r\n        },\r\n        () => this.setState(initState)\r\n      );\r\n      this.setState({\r\n        flash: { status: \"is-success\", msg: \"Product created successfully\" }\r\n      });\r\n    } else {\r\n      this.setState({\r\n        flash: { status: \"is-danger\", msg: \"Please enter name and price\" }\r\n      });\r\n    }\r\n  };\r\n\r\n  handleChange = (e) =>\r\n    this.setState({ [e.target.name]: e.target.value, error: \"\" });\r\n\r\n  render() {\r\n    const { name, price, stock, shortDesc, description } = this.state;\r\n    const { user } = this.props.context;\r\n\r\n    return !(user && user.accessLevel < 1) ? (\r\n      <Redirect to=\"/\" />\r\n    ) : (\r\n      <>\r\n        <div className=\"hero is-primary \">\r\n          <div className=\"hero-body container\">\r\n            <h4 className=\"title\">Add Product</h4>\r\n          </div>\r\n        </div>\r\n        <br />\r\n        <br />\r\n        <form onSubmit={this.save}>\r\n          <div className=\"columns is-mobile is-centered\">\r\n            <div className=\"column is-one-third\">\r\n              <div className=\"field\">\r\n                <label className=\"label\">Product Name: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={name}\r\n                  onChange={this.handleChange}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Price: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"number\"\r\n                  name=\"price\"\r\n                  value={price}\r\n                  onChange={this.handleChange}\r\n                  required\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Available in Stock: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"number\"\r\n                  name=\"stock\"\r\n                  value={stock}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Short Description: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"text\"\r\n                  name=\"shortDesc\"\r\n                  value={shortDesc}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Description: </label>\r\n                <textarea\r\n                  className=\"textarea\"\r\n                  type=\"text\"\r\n                  rows=\"2\"\r\n                  style={{ resize: \"none\" }}\r\n                  name=\"description\"\r\n                  value={description}\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              {this.state.flash && (\r\n                <div className={`notification ${this.state.flash.status}`}>\r\n                  {this.state.flash.msg}\r\n                </div>\r\n              )}\r\n              <div className=\"field is-clearfix\">\r\n                <button\r\n                  className=\"button is-primary is-outlined is-pulled-right\"\r\n                  type=\"submit\"\r\n                  onClick={this.save}\r\n                >\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withContext(AddProduct);\r\n","import React from \"react\";\r\n\r\nconst CartItem = props => {\r\n  const { cartItem, cartKey } = props;\r\n\r\n  const { product, amount } = cartItem;\r\n  return (\r\n    <div className=\" column is-half\">\r\n      <div className=\"box\">\r\n        <div className=\"media\">\r\n          <div className=\"media-left\">\r\n            <figure className=\"image is-64x64\">\r\n              <img\r\n                src=\"https://bulma.io/images/placeholders/128x128.png\"\r\n                alt={product.shortDesc}\r\n              />\r\n            </figure>\r\n          </div>\r\n          <div className=\"media-content\">\r\n            <b style={{ textTransform: \"capitalize\" }}>\r\n              {product.name}{\" \"}\r\n              <span className=\"tag is-primary\">${product.price}</span>\r\n            </b>\r\n            <div>{product.shortDesc}</div>\r\n            <small>{`${amount} in cart`}</small>\r\n          </div>\r\n          <div\r\n            className=\"media-right\"\r\n            onClick={() => props.removeFromCart(cartKey)}\r\n          >\r\n            <span className=\"delete is-large\"></span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartItem;","// ./src/components/Cart.js\r\n\r\nimport React from \"react\";\r\nimport withContext from \"../withContext\";\r\nimport CartItem from \"./CartItem\";\r\n\r\nconst Cart = (props) => {\r\n  const { cart } = props.context;\r\n  const cartKeys = Object.keys(cart || {});\r\n  return (\r\n    <>\r\n      <div className=\"hero is-primary\">\r\n        <div className=\"hero-body container\">\r\n          <h4 className=\"title\">My Cart</h4>\r\n        </div>\r\n      </div>\r\n      <br />\r\n      <div className=\"container\">\r\n        {cartKeys.length ? (\r\n          <div className=\"column columns is-multiline\">\r\n            {cartKeys.map((key) => (\r\n              <CartItem\r\n                cartKey={key}\r\n                key={key}\r\n                cartItem={cart[key]}\r\n                removeFromCart={props.context.removeFromCart}\r\n              />\r\n            ))}\r\n            <div className=\"column is-12 is-clearfix\">\r\n              <br />\r\n              <div className=\"is-pulled-right\">\r\n                <button\r\n                  onClick={props.context.clearCart}\r\n                  className=\"button is-warning \"\r\n                >\r\n                  Clear cart\r\n                </button>{\" \"}\r\n                <button\r\n                  className=\"button is-success\"\r\n                  onClick={props.context.checkout}\r\n                >\r\n                  Checkout\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"column\">\r\n            <div className=\"title has-text-grey-light\">No item in cart!</div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withContext(Cart);\r\n","import React, { Component } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport withContext from \"../withContext\";\r\n\r\nclass Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      username: \"\",\r\n      password: \"\"\r\n    };\r\n  }\r\n\r\n  handleChange = e => this.setState({ [e.target.name]: e.target.value, error: \"\" });\r\n\r\n  login = (e) => {\r\n    e.preventDefault();\r\n\r\n    const { username, password } = this.state;\r\n    if (!username || !password) {\r\n      return this.setState({ error: \"Fill all fields!\" });\r\n    }\r\n    this.props.context.login(username, password)\r\n      .then((loggedIn) => {\r\n        if (!loggedIn) {\r\n          this.setState({ error: \"Invalid Credentails\" });\r\n        }\r\n      })\r\n  };\r\n\r\n  render() {\r\n    return !this.props.context.user ? (\r\n      <>\r\n        <div className=\"hero is-primary \">\r\n          <div className=\"hero-body container\">\r\n            <h4 className=\"title\">Login</h4>\r\n          </div>\r\n        </div>\r\n        <br />\r\n        <br />\r\n        <form onSubmit={this.login}>\r\n          <div className=\"columns is-mobile is-centered\">\r\n            <div className=\"column is-one-third\">\r\n              <div className=\"field\">\r\n                <label className=\"label\">Email: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"email\"\r\n                  name=\"username\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              <div className=\"field\">\r\n                <label className=\"label\">Password: </label>\r\n                <input\r\n                  className=\"input\"\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  onChange={this.handleChange}\r\n                />\r\n              </div>\r\n              {this.state.error && (\r\n                <div className=\"has-text-danger\">{this.state.error}</div>\r\n              )}\r\n              <div className=\"field is-clearfix\">\r\n                <button\r\n                  className=\"button is-primary is-outlined is-pulled-right\"\r\n                >\r\n                  Submit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </>\r\n    ) : (\r\n      <Redirect to=\"/products\" />\r\n    );\r\n  }\r\n}\r\n\r\nexport default withContext(Login);","import React from \"react\";\r\nimport ProductItem from \"./ProductItem\";\r\nimport withContext from \"../withContext\";\r\n\r\nconst ProductList = props => {\r\n  const { products } = props.context;\r\n\r\n  return (\r\n    <>\r\n      <div className=\"hero is-primary\">\r\n        <div className=\"hero-body container\">\r\n          <h4 className=\"title\">Our Products</h4>\r\n        </div>\r\n      </div>\r\n      <br />\r\n      <div className=\"container\">\r\n        <div className=\"column columns is-multiline\">\r\n          {products && products.length ? (\r\n            products.map((product, index) => (\r\n              <ProductItem\r\n                product={product}\r\n                key={index}\r\n                addToCart={props.context.addToCart}\r\n              />\r\n            ))\r\n          ) : (\r\n            <div className=\"column\">\r\n              <span className=\"title has-text-grey-light\">\r\n                No products found!\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default withContext(ProductList);","import React, { Component } from \"react\";\nimport { Switch, Route, Link, BrowserRouter as Router } from \"react-router-dom\";\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nimport AddProducts from './components/AddProducts';\nimport Cart from './components/Cart';\nimport Login from './components/Login';\nimport ProductList from './components/ProductList';\n\nimport Context from \"./Context\";\n\n\nexport default class App extends Component {\n  addProduct = (product, callback) => {\n    let products = this.state.products.slice();\n    products.push(product);\n    this.setState({ products }, () => callback && callback());\n  };\n  async componentDidMount() {\n    let user = localStorage.getItem(\"user\");\n    let cart = localStorage.getItem(\"cart\");\n  \n    const products = await axios.get('https://d0zh0.csb.app/products');\n    user = user ? JSON.parse(user) : null;\n    cart = cart? JSON.parse(cart) : {};\n  \n    this.setState({ user,  products: products.data, cart });\n  }\n  addToCart = cartItem => {\n    let cart = this.state.cart;\n    if (cart[cartItem.id]) {\n      cart[cartItem.id].amount += cartItem.amount;\n    } else {\n      cart[cartItem.id] = cartItem;\n    }\n    if (cart[cartItem.id].amount > cart[cartItem.id].product.stock) {\n      cart[cartItem.id].amount = cart[cartItem.id].product.stock;\n    }\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    this.setState({ cart });\n  };\n  removeFromCart = cartItemId => {\n    let cart = this.state.cart;\n    delete cart[cartItemId];\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    this.setState({ cart });\n  };\n  \n  clearCart = () => {\n    let cart = {};\n    localStorage.removeItem(\"cart\");\n    this.setState({ cart });\n  };\n  checkout = () => {\n    if (!this.state.user) {\n      this.routerRef.current.history.push(\"/login\");\n      return;\n    }\n  \n    const cart = this.state.cart;\n  \n    const products = this.state.products.map(p => {\n      if (cart[p.name]) {\n        p.stock = p.stock - cart[p.name].amount;\n  \n        axios.put(\n          `https://d0zh0.csb.app/products/${p.id}`,\n          { ...p },\n        )\n      }\n      return p;\n    });\n  \n    this.setState({ products });\n    this.clearCart();\n  };\n  login = async (email, password) => {\n    const res = await axios.post(\n      'https://d0zh0.csb.app/login',\n      { email, password },\n    ).catch((res) => {\n      return { status: 401, message: 'Unauthorized' }\n    })\n\n  \n    if(res.status === 200) {\n      const { email } = jwt_decode(res.data.accessToken)\n      const user = {\n        email,\n        token: res.data.accessToken,\n        accessLevel: email === 'admin@example.com' ? 0 : 1\n      }\n  \n      this.setState({ user });\n      localStorage.setItem(\"user\", JSON.stringify(user));\n      return true;\n    } else {\n      return false;\n    }\n  }\n  \n  logout = e => {\n    e.preventDefault();\n    this.setState({ user: null });\n    localStorage.removeItem(\"user\");\n  };\n  constructor(props) {\n    super(props);\n    this.state = {\n      user: null,\n      cart: {},\n      products: []\n    };\n    this.routerRef = React.createRef();\n  }\n  \n\n  render() {\n    return (\n      <Context.Provider\n        value={{\n          ...this.state,\n          removeFromCart: this.removeFromCart,\n          addToCart: this.addToCart,\n          login: this.login,\n          addProduct: this.addProduct,\n          clearCart: this.clearCart,\n          checkout: this.checkout\n        }}\n      >\n        <Router ref={this.routerRef}>\n        <div className=\"App\">\n          <nav\n            className=\"navbar container\"\n            role=\"navigation\"\n            aria-label=\"main navigation\"\n          >\n            <div className=\"navbar-brand\">\n              <b className=\"navbar-item is-size-4 \">ecommerce</b>\n              <label\n                role=\"button\"\n                class=\"navbar-burger burger\"\n                aria-label=\"menu\"\n                aria-expanded=\"false\"\n                data-target=\"navbarBasicExample\"\n                onClick={e => {\n                  e.preventDefault();\n                  this.setState({ showMenu: !this.state.showMenu });\n                }}\n              >\n                <span aria-hidden=\"true\"></span>\n                <span aria-hidden=\"true\"></span>\n                <span aria-hidden=\"true\"></span>\n              </label>\n            </div>\n              <div className={`navbar-menu ${\n                  this.state.showMenu ? \"is-active\" : \"\"\n                }`}>\n                <Link to=\"/products\" className=\"navbar-item\">\n                  Products\n                </Link>\n                {this.state.user && this.state.user.accessLevel < 1 && (\n                  <Link to=\"/add-product\" className=\"navbar-item\">\n                    Add Product\n                  </Link>\n                )}\n                <Link to=\"/cart\" className=\"navbar-item\">\n                  Cart\n                  <span\n                    className=\"tag is-primary\"\n                    style={{ marginLeft: \"5px\" }}\n                  >\n                    { Object.keys(this.state.cart).length }\n                  </span>\n                </Link>\n                {!this.state.user ? (\n                  <Link to=\"/login\" className=\"navbar-item\">\n                    Login\n                  </Link>\n                ) : (\n                  <Link to=\"/\" onClick={this.logout} className=\"navbar-item\">\n                    Logout\n                  </Link>\n                )}\n              </div>\n            </nav>\n            <Switch>\n              <Route exact path=\"/\" component={ProductList} />\n              <Route exact path=\"/login\" component={Login} />\n              <Route exact path=\"/cart\" component={Cart} />\n              <Route exact path=\"/add-product\" component={AddProducts} />\n              <Route exact path=\"/products\" component={ProductList} />\n            </Switch>\n          </div>\n        </Router>\n      </Context.Provider>\n    );\n  }\n}","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}